Adaptation of:

https://github.com/daign/clipping-with-caps